{"version":3,"file":"rollup-plugin-amd.es.js","sources":["../src/index.js"],"sourcesContent":["import convert from '@buxlabs/amd-to-es6';\nimport { createFilter } from 'rollup-pluginutils';\n\nconst firstpass = /\\b(?:define)\\b/;\nconst importStatement = /\\b(import .*['\"])(.*)(['\"].*\\n)/g;\n\nexport default function(options = {}) {\n    const filter = createFilter( options.include, options.exclude );\n\n    return {\n        name: 'amd',\n\n        transform (code, id) {\n            if ( !filter( id ) ) return;\n            if ( !firstpass.test( code ) ) return;\n\n            let transformed = convert(code, options.converter);\n            if (options.rewire) {\n                transformed = transformed.replace(importStatement, (match, begin, moduleId, end) => {\n                    return `${begin}${options.rewire(moduleId, id) || moduleId}${end}`;\n                });\n            }\n\n            return transformed;\n        }\n    };\n}\n"],"names":["const","let"],"mappings":";;;AAGAA,IAAM,SAAS,GAAG,gBAAgB,CAAC;AACnCA,IAAM,eAAe,GAAG,kCAAkC,CAAC;;AAE3D,AAAe,eAAS,OAAY,EAAE;qCAAP,GAAG;;IAC9BA,IAAM,MAAM,GAAG,YAAY,EAAE,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,EAAE,CAAC;;IAEhE,OAAO;QACH,IAAI,EAAE,KAAK;;QAEX,6BAAS,EAAE,IAAI,EAAE,EAAE,EAAE;YACjB,KAAK,CAAC,MAAM,EAAE,EAAE,EAAE,KAAG,SAAO;YAC5B,KAAK,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,KAAG,SAAO;;YAEtCC,IAAI,WAAW,GAAG,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC;YACnD,IAAI,OAAO,CAAC,MAAM,EAAE;gBAChB,WAAW,GAAG,WAAW,CAAC,OAAO,CAAC,eAAe,YAAG,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,EAAE;oBAC7E,aAAU,KAAK,IAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,CAAC,IAAI,QAAQ,IAAG,GAAG,EAAG;iBACtE,CAAC,CAAC;aACN;;YAED,OAAO,WAAW,CAAC;SACtB;KACJ,CAAC;CACL;;;;"}